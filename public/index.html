<!DOCTYPE html>
<html ng-app="pjApp">
  <head>

  <!-- //////////////////////////////////HEADER/////////////////////////////////////// -->


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="images/favicon.ico">

    <title>PJ</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap-3.3.6-dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="jumbotron.css" rel="stylesheet">

    <!-- Firebase configuration -->
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase.js"></script>
    <script>
      // Initialize Firebase and configure it
      var config = {
        apiKey: "AIzaSyCleCXI68tsiwMnY8-VKDKBaF3NscCc0aU",
        authDomain: "plateaujuicing.firebaseapp.com",
        databaseURL: "https://plateaujuicing.firebaseio.com",
        storageBucket: "plateaujuicing.appspot.com",
      };
      firebase.initializeApp(config);
    </script>
    
    <!-- FirebaseUI for Web Auth: Installation -->
    <script src="https://www.gstatic.com/firebasejs/ui/live/0.4/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/live/0.4/firebase-ui-auth.css" />
    <script>
      // FirebaseUI config.
      var uiConfig = {
        'signInSuccessUrl': 'http://localhost:5000/',
        'signInOptions': [
          // Leave the lines as is for the providers you want to offer your users.
          firebase.auth.GoogleAuthProvider.PROVIDER_ID,
          firebase.auth.FacebookAuthProvider.PROVIDER_ID,
          //firebase.auth.TwitterAuthProvider.PROVIDER_ID,
          //firebase.auth.GithubAuthProvider.PROVIDER_ID,
          firebase.auth.EmailAuthProvider.PROVIDER_ID
        ],
        // Terms of service url.
        'tosUrl': '<your-tos-url>',
      };

      // Initialize the FirebaseUI Widget using Firebase.
      var ui = new firebaseui.auth.AuthUI(firebase.auth());
      // The start method will wait until the DOM is loaded.
      ui.start('#firebaseui-auth-container', uiConfig);
    </script>

    <script>
    // Auth status management
    initApp = function() {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {

          var displayName = user.displayName;
          var email = user.email;
          var emailVerified = user.emailVerified;
          var photoURL = user.photoURL;
          var uid = user.uid;
          var providerData = user.providerData;
          user.getToken().then(function(accessToken) {

            //Display name in the Nav bar
            $("#user_name_navbar").text(displayName);
            $("#sign_in_out").text("Sign out");

            //jQuery hiding the Firebase UI Auth when the user is logged in
            console.log("Hide Firebase UI Auth please!");
            $("#firebaseui-auth-container").slideUp(1000);  

            // Push user account details to HTML content
            document.getElementById('userPhoto').src = photoURL;

            // Set user account details to Firebase
            firebase.database().ref("users/" + uid + "/userDetails/").set({
              "displayName": displayName,
              "email": email,
              "emailVerified": emailVerified,
              "photoURL": photoURL,
              "uid": uid,
              "accessToken": accessToken,
              "providerData": providerData
              });
          }) 
        }
        else {
          // User is signed out.
          console.log("Show Firebase UI Auth please!");

          //jQuery showing the Firebase UI Auth when the user is logged in
          $("#firebaseui-auth-container").slideDown(1000); 

        }
      }, function(error) {
        console.log(error);
      });
    };

    window.addEventListener('load', function() {
      initApp()
    });
  </script>

  <!-- jQuery -->
  <script src="node_modules/jquery/dist/jquery.js"></script>
  <!-- AngularJS -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
  <!-- AngularFire -->
  <script src="https://cdn.firebase.com/libs/angularfire/2.0.1/angularfire.min.js"></script>
  <!-- PJ App Javascript -->
  <script src="app/controllers/OrderListController.js"></script>
  <!-- Main JavaScript file -->
  <script src="js/mainJavaScript.js"></script>
  <!-- IG Embed -->
  <script async defer src="//platform.instagram.com/en_US/embeds.js"></script>

  </head>

<!-- //////////////////////////////////BODY/////////////////////////////////////// -->

  <body ng-controller="OrderListController">

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Plateau Juices</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">

          <div class="navbar-right">

            <span id="user_name_navbar" style="color: #777;">Please Sign in </span>
            
            <span style="color: #777;">( </span>
              <a id="sign_in_out" href="http://localhost:5000/" style="color: #777;" onclick="firebase.auth().signOut();"></a>
            <span style="color: #777;"> )</span>
            
            <img id="userPhoto" src="images/default_user.png" alt="User photo" class="img-circle" style="width:40px;height:40px;margin:5px;">

          </div>

        </div><!--/.navbar-collapse -->
        
      </div>
    </nav>

    <!-- Main jumbotron for a primary marketing message or call to action -->
    <div class="jumbotron">
      <div class="container">
        <h1>Local Juices <br>Delivered to Your Door</h1>
        <p>Delivering amazing Juices of freshly pressed veggetables and fruits. <br>
        In Montreal Le Plateau neighborhood.</p>

        <p><a class="btn btn-default" href="https://www.instagram.com/plateaujuices/?hl=en" target="_blank" role="button">Learn more about me, visit my <i>@plateaujuices</i> Instagram <img src="images/Instagram-v051916_200.png" style="width:20px;height:20px"> &raquo;</a></p>

      </div>    
      <!-- Firebase UI Auth container -->
      <div id="firebaseui-auth-container"></div>
    </div>


    <div class="container"> <!-- START of Juices CONTAINER Div -->

      <div class="row"> <!-- START of Juices ROW#1 Div -->

        <div class="col-md-6"> <!-- START of Red Orange Column #1 Div -->
          <h2>The <i>Red Orange</i></h2>
          <img class="juices_pictures img-rounded" src="images/red_orange_500x500.JPG" alt="Red Orange Juice">

          <div class="juices_descrition_container"> <!-- START of Description Div -->

            <div class="juices_description_text">
              The <i>"Red Orange"</i> is a perfect mix of <i>Beet</i> and <i>Carrots</i> as main ingredients. <br>
              It is powered with <i>Lemon</i> for vitamins. Sweetened by <i>Apple</i> and spiced by <i>Ginger</i>.
            </div>
            <div class="juices_description_ingredients">
              <span class="label label-primary">Beet</span>
              <span class="label label-primary">Carrots</span>
              <span class="label label-primary">Lemon</span>
              <span class="label label-primary">Apple</span>
              <span class="label label-primary">Ginger</span>
            </div>

            <hr>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                (Vitamine A) 60%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                (Vitamine C) 40%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">
                (Magnesium) 70%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
                (Zinc) 20%
              </div>
            </div>

          </div> <!-- END of Description Div -->

        </div> <!-- END of Red Orange Column #1 Div -->


        <div class="col-md-6"> <!-- START of Green Energy Column #2 Div -->
          <h2>The <i>Green Energy</i></h2>
          <img class="juices_pictures img-rounded" src="images/green_energy_500x500.JPG" alt="Green Energy Juice">

          <div class="juices_descrition_container"> <!-- START of Description Div -->

            <div class="juices_description_text">
              The <i>"Green Energy"</i> is a perfect mix of <i>Kale</i> and <i>Spinach</i> as main ingredients. <br>
              It is powered with <i>Lemon</i> for vitamins. Sweetened by <i>Apple</i> and spiced by <i>Ginger</i>.
            </div>
            <div class="juices_description_ingredients">
              <span class="label label-primary">Kale</span>
              <span class="label label-primary">Spinach</span>
              <span class="label label-primary">Lemon</span>
              <span class="label label-primary">Apple</span>
              <span class="label label-primary">Ginger</span>
            </div>

            <hr>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                (Vitamine A) 60%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                (Vitamine C) 40%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">
                (Magnesium) 70%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
                (Zinc) 20%
              </div>
            </div>

          </div> <!-- END of Description Div -->

        </div> <!-- END of Green Energy Column #2 Div -->

      <div class="row"> <!-- START of Juices ROW#2 Div -->
 
        <div class="col-md-6"> <!-- START of Celeri Wiz Column #1 Div -->
          <h2>The <i>Celeri Wiz</i></h2>
          <img class="juices_pictures img-rounded" src="images/green_energy_500x500.JPG" alt="Celeri Wiz Juice">

          <div class="juices_descrition_container"> <!-- START of Description Div -->

            <div class="juices_description_text">
              The <i>"Celeri Wiz"</i> is a perfect mix of <i>Celeri</i> and <i>Kale</i> as main ingredients. <br>
              It is powered with <i>Lemon</i> for vitamins. Sweetened by <i>Apple</i> and spiced by <i>Ginger</i>.
            </div>
            <div class="juices_description_ingredients">
              <span class="label label-primary">Celeri</span>
              <span class="label label-primary">Kale</span>
              <span class="label label-primary">Lemon</span>
              <span class="label label-primary">Apple</span>
              <span class="label label-primary">Ginger</span>
            </div>

            <hr>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                (Vitamine A) 60%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                (Vitamine C) 40%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">
                (Magnesium) 70%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
                (Zinc) 20%
              </div>
            </div>

          </div> <!-- END of Description Div -->

        </div> <!-- END of Celeri Wiz Column Div -->


        <div class="col-md-6"> <!-- START of Orange Sunset Column Div -->
          <h2>The <i>Orange Sunset</i></h2>
          <img class="juices_pictures img-rounded" src="images/orange_sunset_500x500.JPG" alt="Orange Sunset Juice">

          <div class="juices_descrition_container"> <!-- START of Description Div -->

            <div class="juices_description_text">
              The <i>"Orange Sunset"</i> is a strong <i>Carrots</i> based juice. <br>
              It is powered with <i>Lemon</i> for vitamins. Sweetened by <i>Apple</i> and spiced by <i>Ginger</i>.
            </div>
            <div class="juices_description_ingredients">
              <span class="label label-primary">Carrots</span>
              <span class="label label-primary">Lemon</span>
              <span class="label label-primary">Apple</span>
              <span class="label label-primary">Ginger</span>
            </div>

            <hr>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                (Vitamine A) 60%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                (Vitamine C) 40%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width: 70%;">
                (Magnesium) 70%
              </div>
            </div>

            <div class="progress juices_description_nutriments">
              <div class="progress-bar" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">
                (Zinc) 20%
              </div>
            </div>

          </div> <!-- END of Description Div -->

        </div> <!-- END of Orange Sunset Column Div -->

      </div> <!-- END of Juices ROW#2 Div -->

    </div> <!-- End of Juices CONTAINER Div -->

    
    <div class="container" style="width:350px;margin:auto"> <!-- START of Orders Form CONTAINER Div -->    

      <hr>
      <!-- AngularJS Order Form -->
      <h1 style="text-align:center;">Order Your Juice:</h1>
      <div ng-controller="OrderListController">
        <form ng-submit="addOrder()">

          <div class="form-group">
            <label for="formJuice">Juice</label>
            <select class="form-control" style="width:150px" id="formJuice" ng-model="formJuice">
              <option>Red Orange</option>
              <option>Green Energy</option>
            </select>
          </div> 

          <div class="form-group">
            <label for="formQty">Quantity</label>
            <select class="form-control" style="width:50px" id="formQty" ng-model="formQty">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
            </select>
          </div> 

          <div class="form-group">
            <label for="formDateTime">Delivery Date &amp Time Slot</label>
            <input type="datetime" class="form-control" style="width:300px" placeholder="E.g.: Jul 7th between 6PM and 8PM" id="formDateTime" ng-model="formDateTime">
          </div>  

          <div class="form-group">
            <label for="formAddress">Delivery Address:</label>
            <input type="text" class="form-control" style="width:300px" placeholder="E.g.: 4704 Rue de la Roche, Appartment#2" id="formAddress" ng-model="formAddress">
          </div>
          <div style="width:100px;margin:auto;">
            <button type="submit" class="btn btn-primary btn-lg">Order! &raquo;</button> 
          </div>
        </form>
      </div>

    </div> <!-- END of Orders Form CONTAINER Div -->  

    <div class="container"> <!-- START of Orders List CONTAINER Div --> 
    <hr>

      <!-- AngularJS Table of Orders -->
      <h1 style="text-align:center;">Your Orders:</h1>
      <div>
        <table class="table">
          <tr>
            <th>Order #</th>
            <th>Juice</th>
            <th>Quantity</th>
            <th>Delivery Date &amp Time Slot</th>
            <th>Delivery Address</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
          <tr ng-repeat="order in orders | filter : tableFilterFunction">
            <td>{{ order.orderNumber }}</td>
            <td>{{ order.juice_id }}</td>
            <td>{{ order.qty }}</td>
            <td>{{ order.date_time }}</td>
            <td>{{ order.delivery_address }}</td>
            <td><span ng-class="{
            'label label-primary': order.status == 'ORDERED',
            'label label-info': order.status == 'IN PROGRESS',
            'label label-success': order.status == 'DELIVERED',
            'label label-warning': order.status == 'OOPS SORRY',
            'label label-default': order.status == 'CANCELLED'
            }">{{ order.status }}</span></td>
            <td>
              <button type="button" class="btn btn-default" ng-click="changeOrderStatus(order,'CANCELLED')">Cancel
              </button>
            </td>
          </tr>          
        </table>

      </div>

      <h4 style="text-align:center">Note about my deliveries:</h4>
 
      <div style="margin-bottom:20px;">
        <p style="text-align:center">
          I am making Juices for my awesome Plateau community on my free time. That's something I love and do with all my heart. <br>
          The steps towards your delivery are: 
          <span class="label label-primary">ORDERED</span><span> &raquo;</span>
          <span class="label label-info">IN PROGRESS</span><span> &raquo;</span>
          <span class="label label-success">DELIVERED</span>
        </p>
        <p style="text-align:center"> 
          It may happen that I cannot deliver at the time you originally asked for in your order. <br>
          Do not worry, in such a case I will set the order status to <span class="label label-warning">OOPS SORRY</span> and connect with you via e-mail to find a better time for both of us.
        </p>
      </div>


    </div> <!-- END of Orders List CONTAINER Div --> 

    <div class="container"> <!-- START of Connect with me Div --> 

      <hr>
      <h1 style="text-align:center;">Connect with me:</h1>

      <div class="connect_container">

        <p><a class="btn btn-default connect_element" href="mailto:plateaujuices@gmail.com" role="button"><b>plateaujuices@gmail.com</b> <img src="images/logo_gmail_32px.png" style="width:20px;height:20px"> &raquo;</a></p>
        <br>

        <p><a class="btn btn-default connect_element" href="https://www.instagram.com/plateaujuices/?hl=en" target="_blank" role="button"><b>@plateaujuices</b> <img src="images/Instagram-v051916_200.png" style="width:20px;height:20px"> &raquo;</a></p>

        <blockquote class="instagram-media" data-instgrm-version="7" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:8px;"> <div style=" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;"> <div style=" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;"></div></div><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/p/6-Xjc5yKmx/" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A photo posted by Plateau Juices (@plateaujuices)</a> on <time style=" font-family:Arial,sans-serif; font-size:14px; line-height:17px;" datetime="2015-08-29T16:46:36+00:00">Aug 29, 2015 at 9:46am PDT</time></p></div></blockquote>

      </div>

      <hr class="custo_hr">

    </div> <!-- END of Connect with me Div --> 

    <div class="container">
      <footer>
        <p style="text-align:center;">&copy; Plateau Juices</p>
      </footer>
    </div>

    <h2>All Orders (Debugging):</h2>
    {{ orders }}

  </body>
</html>
